{% extends "base.html" %}

{% block content %}
<div class="container" style="margin-top: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>âš”ï¸ è³½äº‹åˆ—è¡¨</h1>
        {% if current_user.is_authenticated and current_user.is_organizer() %}
        <a href="{{ url_for('tournament.create') }}" class="btn btn-primary">+ å‰µå»ºè³½äº‹</a>
        {% endif %}
    </div>

    <!-- Filters -->
    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-body">
            <div style="display: flex; gap: 1rem;">
                <a href="{{ url_for('tournament.list', status='all') }}"
                   class="btn {% if status_filter == 'all' %}btn-primary{% else %}btn-outline{% endif %}">
                    å…¨éƒ¨
                </a>
                <a href="{{ url_for('tournament.list', status='live') }}"
                   class="btn {% if status_filter == 'live' %}btn-primary{% else %}btn-outline{% endif %}">
                    ğŸ”´ é€²è¡Œä¸­
                </a>
                <a href="{{ url_for('tournament.list', status='upcoming') }}"
                   class="btn {% if status_filter == 'upcoming' %}btn-primary{% else %}btn-outline{% endif %}">
                    ğŸ“… å³å°‡é–‹å§‹
                </a>
                <a href="{{ url_for('tournament.list', status='completed') }}"
                   class="btn {% if status_filter == 'completed' %}btn-primary{% else %}btn-outline{% endif %}">
                    âœ… å·²çµæŸ
                </a>
            </div>
        </div>
    </div>

    <!-- Tournament List -->
    {% if tournaments %}
    <div class="grid grid-3">
        {% for tournament in tournaments %}
        <div class="card tournament-card">
            <span class="status-badge {% if tournament.status == 'live' %}status-live{% elif tournament.status == 'upcoming' %}status-upcoming{% else %}status-past{% endif %}">
                {% if tournament.status == 'live' %}é€²è¡Œä¸­{% elif tournament.status == 'upcoming' %}å³å°‡é–‹å§‹{% else %}å·²çµæŸ{% endif %}
            </span>
            <div class="card-header">{{ tournament.name }}</div>
            <div class="card-body">
                <p><strong>æ—¥æœŸ:</strong> {{ tournament.date.strftime('%Y-%m-%d') }}</p>
                <p><strong>ä¸»è¾¦:</strong> {{ tournament.organizer.username }}</p>
                <p><strong>åƒè³½äººæ•¸:</strong> {{ tournament.participants|length }} äºº</p>
                {% if tournament.status == 'live' %}
                <p><strong>ç•¶å‰å›åˆ:</strong> ç¬¬ {{ tournament.current_round }} å›åˆ</p>
                {% endif %}
                <a href="{{ url_for('tournament.view', tournament_id=tournament.id) }}"
                   class="btn {% if tournament.status == 'live' %}btn-primary{% else %}btn-outline{% endif %}"
                   style="margin-top: 1rem; width: 100%;">
                    æŸ¥çœ‹è©³æƒ…
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card" style="text-align: center; padding: 3rem;">
        <p style="font-size: 1.2rem; color: var(--text-secondary);">ç›®å‰æ²’æœ‰è³½äº‹</p>
        {% if current_user.is_authenticated and current_user.is_organizer() %}
        <a href="{{ url_for('tournament.create') }}" class="btn btn-primary" style="margin-top: 1rem;">
            å‰µå»ºç¬¬ä¸€å€‹è³½äº‹
        </a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}
