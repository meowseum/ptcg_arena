{% extends "base.html" %}

{% block content %}
<div class="container" style="margin-top: 2rem;">
    <h1 style="margin-bottom: 2rem;">ğŸ‘¥ ç”¨æˆ¶ç®¡ç†</h1>

    <div class="card">
        <div class="card-header">æ‰€æœ‰ç”¨æˆ¶ ({{ users|length }})</div>
        <div class="card-body">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid var(--border-color); text-align: left;">
                        <th style="padding: 0.75rem;">ID</th>
                        <th style="padding: 0.75rem;">ç”¨æˆ¶å</th>
                        <th style="padding: 0.75rem;">Email</th>
                        <th style="padding: 0.75rem;">ç•¶å‰è§’è‰²</th>
                        <th style="padding: 0.75rem;">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td style="padding: 0.75rem;">{{ user.id }}</td>
                        <td style="padding: 0.75rem;">{{ user.username }}</td>
                        <td style="padding: 0.75rem;">{{ user.email }}</td>
                        <td style="padding: 0.75rem;">
                            <span class="status-badge {% if user.role == 'admin' %}status-live{% elif user.role == 'organizer' %}status-upcoming{% else %}status-past{% endif %}">
                                {{ user.role }}
                            </span>
                        </td>
                        <td style="padding: 0.75rem;">
                            {% if user.id != current_user.id %}
                            <select onchange="if(confirm('ç¢ºå®šè¦è®Šæ›´æ­¤ç”¨æˆ¶çš„è§’è‰²å—ï¼Ÿ')) window.location.href='{{ url_for('admin.promote_user', user_id=user.id, role='') }}' + this.value"
                                    style="padding: 0.25rem 0.5rem; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: 4px;">
                                <option value="">è®Šæ›´è§’è‰²...</option>
                                <option value="viewer" {% if user.role == 'viewer' %}disabled{% endif %}>Viewer</option>
                                <option value="player" {% if user.role == 'player' %}disabled{% endif %}>Player</option>
                                <option value="organizer" {% if user.role == 'organizer' %}disabled{% endif %}>Organizer</option>
                                <option value="admin" {% if user.role == 'admin' %}disabled{% endif %}>Admin</option>
                            </select>
                            {% else %}
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">ï¼ˆè‡ªå·±ï¼‰</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div style="margin-top: 2rem;">
        <a href="{{ url_for('admin.dashboard') }}" class="btn btn-outline">â† è¿”å›æ§åˆ¶å°</a>
    </div>
</div>
{% endblock %}
